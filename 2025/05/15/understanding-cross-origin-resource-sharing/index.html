<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Understanding Cross-Origin Resource Sharing (CORS): Problems and Solutions - MyCatalog</title>

<link rel="icon" href="https://blog202411-1252613377.cos.ap-guangzhou.myqcloud.com/boat.png" />


<!-- CSS -->
<link rel="stylesheet" href="/css/style.css">

<!-- Open Graph -->
<meta property="og:type" content="article">
<meta property="og:title" content="Understanding Cross-Origin Resource Sharing (CORS): Problems and Solutions">
<meta property="og:description" content="&lt;p&gt;If you’ve ever built a modern web application, you’ve likely encountered the infamous “Access to fetch at ‘&lt;a href=&#34;https://api.example.com/&#34;&gt;https://api.example.com&lt;/a&gt;‘ from origin ‘&lt;a href=&#34;https://myapp.com/&#34;&gt;https://myapp.com&lt;/a&gt;‘ has been blocked by CORS policy” error. This comprehensive guide explains what cross-origin issues are, why they exist, and how to solve them effectively.&lt;/p&gt;">
<meta property="og:url" content="https://xawei.xyz/2025/05/15/understanding-cross-origin-resource-sharing/">
<meta property="og:site_name" content="MyCatalog">

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Comic+Neue&family=Architects+Daughter&display=swap" rel="stylesheet">

<!-- Canonical -->
<link rel="canonical" href="https://xawei.xyz/2025/05/15/understanding-cross-origin-resource-sharing/" 
<meta name="generator" content="Hexo 5.4.2"></head>
<body class="post-page">
    <div class="banner" style="--gradient-start: #D4F1F9; --gradient-end: #E1F8DC;">
        <div class="banner-content">
            <!-- Header & Logo -->
<div class="header">
    <div class="header-inner">
        <div class="logo">
            <a href="/" class="title">
                
                    MyCatalog
                
            </a>
        </div>
        
        <nav class="menu-container">
            <ul class="menu">
                
                    <li class="menu-item">
                        <a class="menu-link" href="/">
                            
                                <i class="fa-solid fa-house"></i>
                            
                            首页
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a class="menu-link" href="/categories">
                            
                                <i class="fa-solid fa-folder"></i>
                            
                            分类
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a class="menu-link" href="/archives">
                            
                                <i class="fa-solid fa-box-archive"></i>
                            
                            归档
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a class="menu-link" href="/about">
                            
                                <i class="fa-solid fa-user"></i>
                            
                            关于
                        </a>
                    </li>
                
                
                
            </ul>
        </nav>
    </div>
</div> 
        </div>
    </div>
    <div class="background-wrapper"></div>
    <div class="container">
        
        <div class="main-content">
            <div class="post-layout">
    <!-- Main post content -->
    <div class="post-main">
        <article class="post">
            <div class="post-header">
                <h1 class="post-title">Understanding Cross-Origin Resource Sharing (CORS): Problems and Solutions</h1>
                <div class="post-meta">
                    <span><i class="fa-regular fa-calendar"></i> 2025-05-15</span>
                    
                        <span><i class="fa-regular fa-calendar-plus"></i> 2025-05-15</span>
                    
                    
                        <span><i class="fa-regular fa-folder"></i>
                            
                                <a href="/categories/Web-Development/">Web Development</a>
                                
                            
                        </span>
                    
                    
                        <span><i class="fa-solid fa-tags"></i>
                            
                                <a href="/tags/JavaScript/" class="post-tag">JavaScript</a>
                                , 
                            
                                <a href="/tags/Security/" class="post-tag">Security</a>
                                , 
                            
                                <a href="/tags/Web-API/" class="post-tag">Web API</a>
                                , 
                            
                                <a href="/tags/Web-Development/" class="post-tag">Web Development</a>
                                
                            
                        </span>
                    
                </div>
            </div>
            
            <div class="post-content">
                <p>If you’ve ever built a modern web application, you’ve likely encountered the infamous “Access to fetch at ‘<a target="_blank" rel="noopener" href="https://api.example.com/">https://api.example.com</a>‘ from origin ‘<a target="_blank" rel="noopener" href="https://myapp.com/">https://myapp.com</a>‘ has been blocked by CORS policy” error. This comprehensive guide explains what cross-origin issues are, why they exist, and how to solve them effectively.</p>
<span id="more"></span>

<h2 id="What-is-Cross-Origin-Resource-Sharing-CORS"><a href="#What-is-Cross-Origin-Resource-Sharing-CORS" class="headerlink" title="What is Cross-Origin Resource Sharing (CORS)?"></a>What is Cross-Origin Resource Sharing (CORS)?</h2><p>CORS is a security mechanism built into web browsers that restricts web pages from making requests to a domain different from the one that served the original page. In simpler terms, it prevents your JavaScript code running on website A from freely accessing resources on website B.</p>
<h3 id="The-Same-Origin-Policy"><a href="#The-Same-Origin-Policy" class="headerlink" title="The Same-Origin Policy"></a>The Same-Origin Policy</h3><p>The foundation of CORS is the Same-Origin Policy (SOP), a critical security concept that restricts how documents or scripts from one origin can interact with resources from another origin. An “origin” is defined by the combination of:</p>
<ul>
<li>Protocol (http, https)</li>
<li>Domain (example.com)</li>
<li>Port (80, 443, 3000, etc.)</li>
</ul>
<p>For example, <code>https://myapp.com</code> and <code>https://api.myapp.com</code> are considered different origins because their domains differ, even though they share the same protocol.</p>
<h2 id="Why-Do-We-Need-CORS"><a href="#Why-Do-We-Need-CORS" class="headerlink" title="Why Do We Need CORS?"></a>Why Do We Need CORS?</h2><p>CORS exists for security reasons. Without these restrictions, malicious websites could:</p>
<ol>
<li><strong>Access private data</strong>: A malicious site could read your emails if you’re logged into your email in another tab</li>
<li><strong>Perform unauthorized actions</strong>: Execute transactions on your banking site while you’re logged in</li>
<li><strong>Steal sensitive information</strong>: Extract authentication tokens or cookies</li>
</ol>
<p>Here’s a simple diagram illustrating the problem:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────┐         ┌─────────────────┐</span><br><span class="line">│                 │ Request │                 │</span><br><span class="line">│ evil.com        │──────────│ yourbank.com    │</span><br><span class="line">│ (Attacker site) │         │ (Your bank site)│</span><br><span class="line">│                 │ Without │                 │</span><br><span class="line">└─────────────────┘  CORS   └─────────────────┘</span><br><span class="line">                     ↓</span><br><span class="line">           User&#x27;s private data exposed</span><br></pre></td></tr></table></figure>

<h2 id="How-CORS-Works"><a href="#How-CORS-Works" class="headerlink" title="How CORS Works"></a>How CORS Works</h2><p>When your browser makes a cross-origin request:</p>
<ol>
<li>The browser automatically adds an <code>Origin</code> header to the request</li>
<li>The server checks this header and decides whether to allow the request</li>
<li>If allowed, the server responds with specific CORS headers</li>
<li>The browser checks these headers before making the response available to your code</li>
</ol>
<p>Here’s a diagram illustrating the CORS process flow, including the preflight mechanism:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────┐                                  ┌─────────────┐</span><br><span class="line">│             │                                  │             │</span><br><span class="line">│  Browser    │                                  │   Server    │</span><br><span class="line">│             │                                  │             │</span><br><span class="line">└─────┬───────┘                                  └─────┬───────┘</span><br><span class="line">      │                                                │</span><br><span class="line">      │  1. Preflight Request (OPTIONS)                │</span><br><span class="line">      │  Origin: https://myapp.com                     │</span><br><span class="line">      │  Access-Control-Request-Method: POST           │</span><br><span class="line">      │  Access-Control-Request-Headers: Content-Type  │</span><br><span class="line">      │ ───────────────────────────────────────────&gt;  │</span><br><span class="line">      │                                                │</span><br><span class="line">      │  2. Preflight Response                         │</span><br><span class="line">      │  Access-Control-Allow-Origin: https://myapp.com│</span><br><span class="line">      │  Access-Control-Allow-Methods: GET, POST       │</span><br><span class="line">      │  Access-Control-Allow-Headers: Content-Type    │</span><br><span class="line">      │  Access-Control-Max-Age: 86400                 │</span><br><span class="line">      │ &lt;───────────────────────────────────────────  │</span><br><span class="line">      │                                                │</span><br><span class="line">      │  3. Actual Request (POST)                      │</span><br><span class="line">      │  Origin: https://myapp.com                     │</span><br><span class="line">      │  Content-Type: application/json                │</span><br><span class="line">      │ ───────────────────────────────────────────&gt;  │</span><br><span class="line">      │                                                │</span><br><span class="line">      │  4. Actual Response                            │</span><br><span class="line">      │  Access-Control-Allow-Origin: https://myapp.com│</span><br><span class="line">      │  Content-Type: application/json                │</span><br><span class="line">      │ &lt;───────────────────────────────────────────  │</span><br><span class="line">      │                                                │</span><br><span class="line">┌─────┴───────┐                                  ┌─────┴───────┐</span><br><span class="line">│             │                                  │             │</span><br><span class="line">│  Browser    │                                  │   Server    │</span><br><span class="line">│             │                                  │             │</span><br><span class="line">└─────────────┘                                  └─────────────┘</span><br></pre></td></tr></table></figure>

<p>For simple requests (without preflight), steps 1 and 2 are skipped.</p>
<h3 id="Key-CORS-Headers"><a href="#Key-CORS-Headers" class="headerlink" title="Key CORS Headers"></a>Key CORS Headers</h3><ul>
<li><code>Access-Control-Allow-Origin</code>: Specifies which origins can access the resource</li>
<li><code>Access-Control-Allow-Methods</code>: Indicates which HTTP methods are allowed</li>
<li><code>Access-Control-Allow-Headers</code>: Lists which headers can be used</li>
<li><code>Access-Control-Allow-Credentials</code>: Specifies if the request can include credentials (cookies, authentication)</li>
<li><code>Access-Control-Expose-Headers</code>: Indicates which response headers should be exposed to the client</li>
</ul>
<h2 id="Common-CORS-Scenarios-and-Solutions"><a href="#Common-CORS-Scenarios-and-Solutions" class="headerlink" title="Common CORS Scenarios and Solutions"></a>Common CORS Scenarios and Solutions</h2><h3 id="1-Simple-Requests"><a href="#1-Simple-Requests" class="headerlink" title="1. Simple Requests"></a>1. Simple Requests</h3><p>Some requests don’t trigger a preflight check. These “simple requests” meet all of the following conditions:</p>
<ul>
<li>Use only GET, HEAD, or POST methods</li>
<li>Only include standard headers</li>
<li>If using POST, only use certain content types</li>
<li>No event listeners on upload objects</li>
<li>No ReadableStream objects</li>
</ul>
<p>For simple requests, the server only needs to include the appropriate <code>Access-Control-Allow-Origin</code> header:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: https://myapp.com</span><br></pre></td></tr></table></figure>

<p>Or to allow any origin (not recommended for production):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: *</span><br></pre></td></tr></table></figure>

<h3 id="2-Preflight-Requests"><a href="#2-Preflight-Requests" class="headerlink" title="2. Preflight Requests"></a>2. Preflight Requests</h3><p>For more complex requests, browsers send a “preflight” OPTIONS request to check if the actual request is allowed. This happens when:</p>
<ul>
<li>Using methods other than GET, POST, or HEAD</li>
<li>Using custom headers</li>
<li>Using content types other than application&#x2F;x-www-form-urlencoded, multipart&#x2F;form-data, or text&#x2F;plain</li>
</ul>
<p>Here’s what a preflight exchange looks like:</p>
<ol>
<li><p>Browser sends OPTIONS request:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS /api/data HTTP/1.1</span><br><span class="line">Host: api.example.com</span><br><span class="line">Origin: https://myapp.com</span><br><span class="line">Access-Control-Request-Method: PUT</span><br><span class="line">Access-Control-Request-Headers: Content-Type, Authorization</span><br></pre></td></tr></table></figure>
</li>
<li><p>Server responds with permissions:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 204 No Content</span><br><span class="line">Access-Control-Allow-Origin: https://myapp.com</span><br><span class="line">Access-Control-Allow-Methods: GET, POST, PUT, DELETE</span><br><span class="line">Access-Control-Allow-Headers: Content-Type, Authorization</span><br><span class="line">Access-Control-Max-Age: 86400</span><br></pre></td></tr></table></figure>
</li>
<li><p>If approved, the browser proceeds with the actual request</p>
</li>
</ol>
<h2 id="Implementing-CORS-Solutions"><a href="#Implementing-CORS-Solutions" class="headerlink" title="Implementing CORS Solutions"></a>Implementing CORS Solutions</h2><p>Let’s look at how to implement CORS solutions in different environments:</p>
<h3 id="Backend-Solutions"><a href="#Backend-Solutions" class="headerlink" title="Backend Solutions"></a>Backend Solutions</h3><h4 id="Node-js-with-Express"><a href="#Node-js-with-Express" class="headerlink" title="Node.js with Express"></a>Node.js with Express</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Enable CORS for all routes</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// Or with specific options</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>(&#123;</span><br><span class="line">  <span class="attr">origin</span>: <span class="string">&#x27;https://myapp.com&#x27;</span>,</span><br><span class="line">  <span class="attr">methods</span>: [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;PUT&#x27;</span>, <span class="string">&#x27;DELETE&#x27;</span>],</span><br><span class="line">  <span class="attr">allowedHeaders</span>: [<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;Authorization&#x27;</span>],</span><br><span class="line">  <span class="attr">credentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Enable CORS for a specific route only</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/api/public-data&#x27;</span>, <span class="title function_">cors</span>(), <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;This is public data&#x27;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server running on port 3000&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Python-with-Flask"><a href="#Python-with-Flask" class="headerlink" title="Python with Flask"></a>Python with Flask</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_cors <span class="keyword">import</span> CORS</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable CORS for all routes</span></span><br><span class="line">CORS(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Or with specific options</span></span><br><span class="line">CORS(app, resources=&#123;</span><br><span class="line">    <span class="string">r&quot;/api/*&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;origins&quot;</span>: <span class="string">&quot;https://myapp.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;methods&quot;</span>: [<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;DELETE&quot;</span>],</span><br><span class="line">        <span class="string">&quot;allow_headers&quot;</span>: [<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;Authorization&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/api/data&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Data accessed successfully&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(port=<span class="number">5000</span>)</span><br></pre></td></tr></table></figure>

<h4 id="Go-with-Gin"><a href="#Go-with-Gin" class="headerlink" title="Go with Gin"></a>Go with Gin</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-contrib/cors&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Enable CORS for all routes</span></span><br><span class="line">	router.Use(cors.Default())</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Or with specific options</span></span><br><span class="line">	config := cors.Config&#123;</span><br><span class="line">		AllowOrigins:     []<span class="type">string</span>&#123;<span class="string">&quot;https://myapp.com&quot;</span>&#125;,</span><br><span class="line">		AllowMethods:     []<span class="type">string</span>&#123;<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;DELETE&quot;</span>&#125;,</span><br><span class="line">		AllowHeaders:     []<span class="type">string</span>&#123;<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;Authorization&quot;</span>&#125;,</span><br><span class="line">		AllowCredentials: <span class="literal">true</span>,</span><br><span class="line">		MaxAge:           <span class="number">12</span> * time.Hour,</span><br><span class="line">	&#125;</span><br><span class="line">	router.Use(cors.New(config))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// API route</span></span><br><span class="line">	router.GET(<span class="string">&quot;/api/data&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.JSON(<span class="number">200</span>, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Data accessed successfully&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	router.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Frontend-Solutions"><a href="#Frontend-Solutions" class="headerlink" title="Frontend Solutions"></a>Frontend Solutions</h3><h4 id="Making-Cross-Origin-Requests-with-Fetch-API"><a href="#Making-Cross-Origin-Requests-with-Fetch-API" class="headerlink" title="Making Cross-Origin Requests with Fetch API"></a>Making Cross-Origin Requests with Fetch API</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Simple GET request</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Request with credentials (cookies)</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/user-data&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&#x27;include&#x27;</span>, <span class="comment">// Sends cookies</span></span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer token123&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br></pre></td></tr></table></figure>

<h4 id="Using-Axios"><a href="#Using-Axios" class="headerlink" title="Using Axios"></a>Using Axios</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Configure Axios for all requests</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://api.example.com&#x27;</span>;</span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">withCredentials</span> = <span class="literal">true</span>; <span class="comment">// Include credentials</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Make a request</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;/data&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// With more options</span></span><br><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;/submit-data&#x27;</span>, </span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">email</span>: <span class="string">&#x27;john@example.com&#x27;</span> &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer token123&#x27;</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br></pre></td></tr></table></figure>

<h2 id="Proxying-Requests"><a href="#Proxying-Requests" class="headerlink" title="Proxying Requests"></a>Proxying Requests</h2><p>If you can’t modify the server’s CORS policy, you can use a proxy:</p>
<h3 id="Development-Proxy"><a href="#Development-Proxy" class="headerlink" title="Development Proxy"></a>Development Proxy</h3><p>For React apps (in package.json):</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-app&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;proxy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.example.com&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Then in your code:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This will be proxied to https://api.example.com/data</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;/data&#x27;</span>).<span class="title function_">then</span>(<span class="comment">/*...*/</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Production-Proxy"><a href="#Production-Proxy" class="headerlink" title="Production Proxy"></a>Production Proxy</h3><p>Set up a server-side proxy with Nginx:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> myapp.com;</span><br><span class="line">    </span><br><span class="line">    <span class="section">location</span> /api/ &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> https://api.example.com/;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host api.example.com;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Origin https://api.example.com;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span> /var/www/html;</span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="CORS-in-Action-Complete-Example"><a href="#CORS-in-Action-Complete-Example" class="headerlink" title="CORS in Action: Complete Example"></a>CORS in Action: Complete Example</h2><p>Let’s create a complete example with both frontend and backend code to demonstrate CORS in action:</p>
<h3 id="Backend-Node-js-Express"><a href="#Backend-Node-js-Express" class="headerlink" title="Backend (Node.js&#x2F;Express)"></a>Backend (Node.js&#x2F;Express)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// CORS middleware configuration</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>(&#123;</span><br><span class="line">  <span class="attr">origin</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>, <span class="comment">// Your frontend URL</span></span><br><span class="line">  <span class="attr">methods</span>: [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>],</span><br><span class="line">  <span class="attr">allowedHeaders</span>: [<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;Authorization&#x27;</span>],</span><br><span class="line">  <span class="attr">credentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// A protected resource endpoint</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/api/protected-data&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">json</span>(&#123; </span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;This is protected data&#x27;</span>,</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>()</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start server</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = <span class="number">3000</span>;</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running on http://localhost:<span class="subst">$&#123;PORT&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Frontend-HTML-JavaScript"><a href="#Frontend-HTML-JavaScript" class="headerlink" title="Frontend (HTML&#x2F;JavaScript)"></a>Frontend (HTML&#x2F;JavaScript)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.html --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>CORS Demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-family</span>: Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">max-width</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.result</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: <span class="number">#45a049</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>CORS Demo<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>This page demonstrates cross-origin requests.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;fetchData&quot;</span>&gt;</span>Fetch Protected Data<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span> <span class="attr">class</span>=<span class="string">&quot;result&quot;</span>&gt;</span>Results will appear here...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;fetchData&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> resultDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;result&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      resultDiv.<span class="property">textContent</span> = <span class="string">&#x27;Fetching data...&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// This is a cross-origin request</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://localhost:3000/api/protected-data&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">credentials</span>: <span class="string">&#x27;include&#x27;</span>, <span class="comment">// Include cookies if needed</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">headers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP error! Status: <span class="subst">$&#123;response.status&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">        resultDiv.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">          &lt;p&gt;&lt;strong&gt;Success!&lt;/strong&gt; Data received:&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">          &lt;pre&gt;<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(data, <span class="literal">null</span>, <span class="number">2</span>)&#125;</span>&lt;/pre&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">        `</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">        resultDiv.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">          &lt;p&gt;&lt;strong&gt;Error:&lt;/strong&gt; <span class="subst">$&#123;error.message&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">          &lt;p&gt;This might be a CORS error. Check the console for details.&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">        `</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Fetch error:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Running-the-Example"><a href="#Running-the-Example" class="headerlink" title="Running the Example"></a>Running the Example</h3><ol>
<li>Save the server code as <code>server.js</code> and run with <code>node server.js</code></li>
<li>Save the HTML file as <code>index.html</code> and open it with a web server (e.g., <code>python -m http.server 8080</code>)</li>
<li>Click the “Fetch Protected Data” button and observe the results</li>
</ol>
<p>If everything is configured correctly, you’ll see the protected data displayed. If the CORS headers are incorrect or missing, you’ll see an error in the console.</p>
<h2 id="Diagnosing-CORS-Issues"><a href="#Diagnosing-CORS-Issues" class="headerlink" title="Diagnosing CORS Issues"></a>Diagnosing CORS Issues</h2><p>When troubleshooting CORS problems:</p>
<ol>
<li><strong>Check browser console</strong>: Look for detailed error messages</li>
<li><strong>Examine network requests</strong>: Use browser DevTools to inspect headers</li>
<li><strong>Verify server configuration</strong>: Ensure CORS headers are being sent properly</li>
<li><strong>Test with simple requests first</strong>: Start with GET requests before more complex operations</li>
</ol>
<h2 id="Visual-Guide-to-CORS-Debugging"><a href="#Visual-Guide-to-CORS-Debugging" class="headerlink" title="Visual Guide to CORS Debugging"></a>Visual Guide to CORS Debugging</h2><p>When faced with CORS errors, follow this visual debugging workflow:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────┐</span><br><span class="line">│ CORS Error Detected │</span><br><span class="line">└──────────┬──────────┘</span><br><span class="line">           │</span><br><span class="line">           ▼</span><br><span class="line">┌─────────────────────┐     ┌─────────────────────────────────┐</span><br><span class="line">│ Check Browser       │     │ Look for error messages like:    │</span><br><span class="line">│ Console Errors      │────►│ &quot;Access to fetch at... has been  │</span><br><span class="line">└──────────┬──────────┘     │ blocked by CORS policy&quot;          │</span><br><span class="line">           │                └─────────────────────────────────┘</span><br><span class="line">           ▼</span><br><span class="line">┌─────────────────────┐     ┌─────────────────────────────────┐</span><br><span class="line">│ Inspect Network     │     │ Check for:                       │</span><br><span class="line">│ Requests &amp; Headers  │────►│ - OPTIONS preflight requests     │</span><br><span class="line">└──────────┬──────────┘     │ - Missing CORS response headers  │</span><br><span class="line">           │                └─────────────────────────────────┘</span><br><span class="line">           ▼</span><br><span class="line">┌─────────────────────┐</span><br><span class="line">│ Is this a Simple or │     ┌─────────────────────────────────┐</span><br><span class="line">│ Preflighted Request?│─────┤ Simple: GET/HEAD/POST with      │</span><br><span class="line">└──────────┬──────────┘   │ │ standard content types           │</span><br><span class="line">           │              │ └─────────────────────────────────┘</span><br><span class="line">           │              │</span><br><span class="line">           │              │ ┌─────────────────────────────────┐</span><br><span class="line">           │              └─┤ Preflighted: Custom headers,     │</span><br><span class="line">           │                │ non-simple methods/content types │</span><br><span class="line">           │                └─────────────────────────────────┘</span><br><span class="line">           ▼</span><br><span class="line">┌─────────────────────┐</span><br><span class="line">│ Verify Server-Side  │</span><br><span class="line">│ CORS Configuration  │</span><br><span class="line">└──────────┬──────────┘</span><br><span class="line">           │</span><br><span class="line">           ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────┐</span><br><span class="line">│ Solutions:                                                   │</span><br><span class="line">│ 1. Configure server with proper CORS headers                 │</span><br><span class="line">│ 2. Set up a proxy on your domain                             │</span><br><span class="line">│ 3. Use development server with CORS proxy                    │</span><br><span class="line">│ 4. Modify request to be a &quot;simple request&quot; if possible       │</span><br><span class="line">└─────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<p>Here’s what a typical CORS error looks like in the browser console:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access to fetch at &#x27;https://api.example.com/data&#x27; from origin &#x27;https://myapp.com&#x27; </span><br><span class="line">has been blocked by CORS policy: No &#x27;Access-Control-Allow-Origin&#x27; header is present </span><br><span class="line">on the requested resource. If an opaque response serves your needs, set the request&#x27;s </span><br><span class="line">mode to &#x27;no-cors&#x27; to fetch the resource with CORS disabled.</span><br></pre></td></tr></table></figure>

<p>This visual error pattern is your clue to check the server’s CORS configuration.</p>
<h2 id="Security-Considerations"><a href="#Security-Considerations" class="headerlink" title="Security Considerations"></a>Security Considerations</h2><p>While implementing CORS, keep these security best practices in mind:</p>
<ol>
<li><strong>Don’t use wildcard origins in production</strong>: Instead of <code>Access-Control-Allow-Origin: *</code>, specify exact domains</li>
<li><strong>Be careful with credentials</strong>: Only enable <code>Access-Control-Allow-Credentials: true</code> if necessary</li>
<li><strong>Limit exposed methods</strong>: Only allow the HTTP methods your API actually needs</li>
<li><strong>Set reasonable max-age</strong>: Don’t cache preflight responses for too long</li>
<li><strong>Consider additional security measures</strong>: CORS is just one layer; also implement proper authentication and authorization</li>
</ol>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Cross-origin resource sharing is a fundamental security feature of modern browsers that protects users from malicious websites. While CORS errors can be frustrating, they serve an important purpose in maintaining web security.</p>
<p>By understanding how CORS works and implementing proper configurations on both the frontend and backend, you can build web applications that communicate safely across different domains while maintaining security.</p>
<p>Remember that the most secure approach depends on your specific requirements – sometimes a proxy is best, while other times configuring proper CORS headers is the way to go. The key is understanding the security implications of your choices.</p>
<p>What CORS challenges have you faced in your projects? Share your experiences in the comments! </p>

            </div>
            
            
                <div class="post-copyright">
                    <div class="copyright-title">版权声明</div>
                    <div class="copyright-info">
                        <div class="copyright-info-item">
                            <span>作者:</span>
                            <span>xawei</span>
                        </div>
                        <div class="copyright-info-item">
                            <span>post.copyright.created_at:</span>
                            <span>2025-05-15</span>
                        </div>
                        
                            <div class="copyright-info-item">
                                <span>post.copyright.updated_at:</span>
                                <span>2025-05-15</span>
                            </div>
                        
                        <div class="copyright-info-item">
                            <span>链接:</span>
                            <a href="https://xawei.xyz/2025/05/15/understanding-cross-origin-resource-sharing/">https://xawei.xyz/2025/05/15/understanding-cross-origin-resource-sharing/</a>
                        </div>
                        <div class="copyright-info-item">
                            <span>本博客所有文章除特别声明外，均采用 CC BY-NC-SA 4.0 许可协议。</span>
                        </div>
                    </div>
                </div>
            
            
            
                <div class="post-tags">
                    <div class="post-tags-header">post.tags:</div>
                    <div class="post-tags-list">
                        
                            <a class="post-tag" href="/tags/JavaScript/"># JavaScript</a>
                        
                            <a class="post-tag" href="/tags/Security/"># Security</a>
                        
                            <a class="post-tag" href="/tags/Web-API/"># Web API</a>
                        
                            <a class="post-tag" href="/tags/Web-Development/"># Web Development</a>
                        
                    </div>
                </div>
            
            
            <div class="post-navigation">
                <div class="post-nav-prev">
                    
                </div>
                <div class="post-nav-next">
                    
                        <a href="/2025/05/12/mastering-go-again/" class="post-nav-link">
                            <span class="post-nav-title">Mastering Go Again: A Refresher for Developers with Prior Experience</span>
                            <i class="fa-solid fa-angle-right"></i>
                        </a>
                    
                </div>
            </div>
        </article>
    </div>

    <!-- TOC column -->
    
        <div class="post-toc">
            <div class="toc-inner">
                <div class="toc-title">
                    <i class="fa-solid fa-list"></i> <span>目录</span>
                </div>
                <div class="toc-content">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-Cross-Origin-Resource-Sharing-CORS"><span class="toc-text">What is Cross-Origin Resource Sharing (CORS)?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Same-Origin-Policy"><span class="toc-text">The Same-Origin Policy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-Do-We-Need-CORS"><span class="toc-text">Why Do We Need CORS?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-CORS-Works"><span class="toc-text">How CORS Works</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Key-CORS-Headers"><span class="toc-text">Key CORS Headers</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Common-CORS-Scenarios-and-Solutions"><span class="toc-text">Common CORS Scenarios and Solutions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Simple-Requests"><span class="toc-text">1. Simple Requests</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Preflight-Requests"><span class="toc-text">2. Preflight Requests</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Implementing-CORS-Solutions"><span class="toc-text">Implementing CORS Solutions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Backend-Solutions"><span class="toc-text">Backend Solutions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Node-js-with-Express"><span class="toc-text">Node.js with Express</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-with-Flask"><span class="toc-text">Python with Flask</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Go-with-Gin"><span class="toc-text">Go with Gin</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Frontend-Solutions"><span class="toc-text">Frontend Solutions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Making-Cross-Origin-Requests-with-Fetch-API"><span class="toc-text">Making Cross-Origin Requests with Fetch API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Using-Axios"><span class="toc-text">Using Axios</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proxying-Requests"><span class="toc-text">Proxying Requests</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Development-Proxy"><span class="toc-text">Development Proxy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Production-Proxy"><span class="toc-text">Production Proxy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CORS-in-Action-Complete-Example"><span class="toc-text">CORS in Action: Complete Example</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Backend-Node-js-Express"><span class="toc-text">Backend (Node.js&#x2F;Express)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Frontend-HTML-JavaScript"><span class="toc-text">Frontend (HTML&#x2F;JavaScript)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Running-the-Example"><span class="toc-text">Running the Example</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Diagnosing-CORS-Issues"><span class="toc-text">Diagnosing CORS Issues</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Visual-Guide-to-CORS-Debugging"><span class="toc-text">Visual Guide to CORS Debugging</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Security-Considerations"><span class="toc-text">Security Considerations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-text">Conclusion</span></a></li></ol>
                </div>
            </div>
        </div>
    
</div> 
        </div>
        
    </div>
    <!-- Footer -->
<footer class="footer">
    <div class="footer-inner">
        <div class="copyright">
            © 2025 <i class="fa-solid fa-heart"></i> xawei
        </div>
    </div>
</footer> 
    <div class="back-to-top">
        <i class="fa-solid fa-arrow-up"></i>
    </div>
    <!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- jQuery -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>

<!-- Theme scripts -->
<script src="/js/main.js"></script>


<!-- TOC functionality -->
<script src="/js/toc.js"></script>
 
</body>
</html> 